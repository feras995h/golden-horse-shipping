# ุฏููู ุงููุดุฑ ุนูู Coolify - Golden Horse Shipping

## ๐ ุชุดุฎูุต ุงููุดููุฉ

**ุงูุฎุทุฃ ุงูุญุงูู:**
```
Error: getaddrinfo EAI_AGAIN base
```

**ุงูุณุจุจ:** ุงูุชุทุจูู ูุญุงูู ุงูุงุชุตุงู ุจูุถูู ูุณูู "base" ุจุฏูุงู ูู ุนููุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุตุญูุญ `72.60.92.146`.

**ุงูุญู:** ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุบูุฑ ูุญุฏุฏุฉ ุจุดูู ุตุญูุญ ูู Coolify.

---

## โ ุงูุญู: ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

### ุฎุทูุงุช ุงูุฅุนุฏุงุฏ ูู Coolify:

1. **ุงูุชุญ ูุดุฑูุนู ูู Coolify**
2. **ุงุฐูุจ ุฅูู ูุณู "Environment Variables"**
3. **ุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ:**

---

### ๐ ูุงุฆูุฉ ุงููุชุบูุฑุงุช ุงููุทููุจุฉ

ุงูุณุฎ ูุงูุตู ูู ูุชุบูุฑ ูู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ ูู Coolify:

#### ๐ง ุฅุนุฏุงุฏุงุช ุงูุฎุงุฏู
```
NODE_ENV=production
PORT=3000
BACKEND_PORT=3001
FRONTEND_PORT=3000
```

#### ๐๏ธ ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุงูุทุฑููุฉ ุงูุฃููู - ุงุณุชุฎุฏุงู DATABASE_URL)
```
DATABASE_URL=postgres://postgres:A93zhpdV6icewK6rxbBQRScmxZvyWAhjvXg2QJApIKzU0gVx8CzubNgvo2O97n1l@72.60.92.146:5433/postgres
```

#### ๐๏ธ ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุงูุทุฑููุฉ ุงูุซุงููุฉ - ูุชุบูุฑุงุช ูููุตูุฉ - ููุตู ุจูุง)
```
DB_TYPE=postgres
DB_HOST=72.60.92.146
DB_PORT=5433
DB_USERNAME=postgres
DB_PASSWORD=A93zhpdV6icewK6rxbBQRScmxZvyWAhjvXg2QJApIKzU0gVx8CzubNgvo2O97n1l
DB_NAME=postgres
DB_SSL=false
DB_SSL_REJECT_UNAUTHORIZED=false
DB_SYNCHRONIZE=true
DB_LOGGING=false
```

**โ๏ธ ููู:** ุงุณุชุฎุฏู **ุงูุทุฑููุฉ ุงูุซุงููุฉ (ูุชุบูุฑุงุช ูููุตูุฉ)** ูุฃููุง ุฃูุซุฑ ููุซูููุฉ ูู Coolify.

#### ๐ ุฅุนุฏุงุฏุงุช JWT
```
JWT_SECRET=GoldenHorse-JWT-Secret-Key-2024-Production-Change-This-To-Very-Secure-Random-String
JWT_EXPIRES_IN=7d
```

#### ๐ ุฅุนุฏุงุฏุงุช CORS ูุงูุฑูุงุจุท
```
CORS_ORIGIN=*
FRONTEND_URL=http://localhost:3000
```

#### ๐ฑ ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู
```
APP_NAME=Golden Horse Shipping
APP_VERSION=1.0.0
DEFAULT_LANGUAGE=ar
UPLOAD_PATH=/app/uploads
```

#### ๐ข ุฅุนุฏุงุฏุงุช ShipsGo API
```
SHIPSGO_API_URL=https://api.shipsgo.com/v1
SHIPSGO_API_KEY=6eada10b-fcd9-4ab8-ba19-3e2cb33fc1fa
SHIPSGO_USE_MOCK=false
```

#### โก ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ
```
NEXT_TELEMETRY_DISABLED=1
```

---

## ๐ ุฎุทูุงุช ุงููุดุฑ

### 1. ุฅุถุงูุฉ ุงููุชุบูุฑุงุช
- ูู Coolifyุ ุงุฐูุจ ุฅูู **Environment Variables**
- ุฃุถู **ุฌููุน** ุงููุชุบูุฑุงุช ุงููุฐููุฑุฉ ุฃุนูุงู
- **ูุง ุชุชุฑู ุฃู ูุชุบูุฑ ูุงุฑุบุงู**
- **ุงุญุฐู ุฃู ูุชุบูุฑุงุช ูุฏููุฉ** ูุฏ ุชุชุนุงุฑุถ (ูุซู ูุชุบูุฑ ูุฏ ูุญุชูู ุนูู "base")

### 2. ุญูุธ ุงูุชุบููุฑุงุช
- ุงููุฑ ุนูู **Save** ุฃู **Update**

### 3. ุฅุนุงุฏุฉ ุงููุดุฑ
- ุงููุฑ ุนูู **Redeploy** ุฃู **Deploy**
- ุงูุชุธุฑ ุญุชู ููุชูู ุงูุจูุงุก

### 4. ุงูุชุญูู ูู ุงูุณุฌูุงุช
ุจุนุฏ ุงููุดุฑุ ุงูุชุญ ุณุฌูุงุช ุงูุญุงููุฉ. ูุฌุจ ุฃู ุชุฑู:

```
๐ Database Configuration Debug:
  - NODE_ENV: production
  - DATABASE_URL: postgres://postgres:...
  - DB_HOST: 72.60.92.146
  - DB_TYPE: postgres
  - Is PostgreSQL: true
  - Synchronize: true
โ Using individual database variables
```

ุฃู:

```
โ Using DATABASE_URL
[Nest] X  - XX/XX/XXXX, XX:XX:XX XX     LOG [NestFactory] Starting Nest application...
[Nest] X  - XX/XX/XXXX, XX:XX:XX XX     LOG [InstanceLoader] TypeOrmModule dependencies initialized
```

**ูุฌุจ ุฃูุง ุชุฑู:**
```
Error: getaddrinfo EAI_AGAIN base
```

---

## โ๏ธ ูุตุงุฆุญ ูููุฉ

### 1. DB_SYNCHRONIZE
- **ูู ุงููุดุฑ ุงูุฃูู:** ุงุณุชุฎุฏู `DB_SYNCHRONIZE=true` ูุฅูุดุงุก ุงูุฌุฏุงูู ุชููุงุฆูุงู
- **ุจุนุฏ ุงููุดุฑ ุงูุฃูู:** ุบููุฑ ุฅูู `DB_SYNCHRONIZE=false` ูุชุฌูุจ ููุฏุงู ุงูุจูุงูุงุช

### 2. ุงูุชุญูู ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
ุชุฃูุฏ ูู:
- โ ุงูุจูุฑุช **5433** ููุชูุญ ููุงุชุตุงูุงุช ูู Coolify
- โ ุนููุงู IP **72.60.92.146** ูุงุจู ูููุตูู ูู ุฎุงุฏู Coolify
- โ ุฌุฏุงุฑ ุงูุญูุงูุฉ ูุณูุญ ุจุงูุงุชุตุงูุงุช
- โ ุจูุงูุงุช ุงูุงุนุชูุงุฏ ุตุญูุญุฉ

### 3. ุงุณุชูุดุงู ุงูุฃุฎุทุงุก
ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:

#### ุฃ) ุชุญูู ูู ุงููุชุบูุฑุงุช
```bash
# ูู ุณุฌูุงุช Coolifyุ ุงุจุญุซ ุนู:
๐ Database Configuration Debug:
  - DB_HOST: 72.60.92.146  # ูุฌุจ ุฃู ูููู ูุฐุง ุงูุนููุงู ูููุณ "base"
```

#### ุจ) ุงุฎุชุจุฑ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
ููููู ุงุณุชุฎุฏุงู ุฃุฏุงุฉ ูุซู **pgAdmin** ุฃู **psql** ููุชุญูู ูู ุงูุงุชุตุงู:
```bash
psql "postgres://postgres:A93zhpdV6icewK6rxbBQRScmxZvyWAhjvXg2QJApIKzU0gVx8CzubNgvo2O97n1l@72.60.92.146:5433/postgres"
```

#### ุฌ) ุชุญูู ูู docker-compose.yml
ุชุฃูุฏ ูู ุฃู ููู `docker-compose.yml` ูุณุชุฎุฏู profile `single-app` ุฃู `coolify`:
```yaml
profiles:
  - single-app
  - coolify
```

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

### ุงููุฑู ุจูู ุงูุทุฑููุชูู:

**ุทุฑููุฉ DATABASE_URL:**
- โ ุจุณูุทุฉ ูุณุฑูุนุฉ
- โ ูุฏ ูุง ุชุนูู ูู ุจุนุถ ุฅุนุฏุงุฏุงุช Coolify
- โ ูุฏ ูุชู ุชุญููููุง ุจุดูู ุฎุงุทุฆ

**ุทุฑููุฉ ุงููุชุบูุฑุงุช ุงููููุตูุฉ:**
- โ ุฃูุซุฑ ููุซูููุฉ
- โ ุชุนูู ูู ูุนุธู ุงูุญุงูุงุช
- โ ุณููุฉ ุงูุชุญุฏูุซ ูุงูุชุนุฏูู
- โ **ููุตู ุจูุง**

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ูู ุฃู **ูุชุบูุฑุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ูุญุฏุฏุฉ ุจุดูู ุตุญูุญ**ุ ููุง ูุฌุนู ุงูุชุทุจูู ูุญุงูู ุงูุงุชุตุงู ุจูุถูู ูุณูู "base" (ูููุฉ ุงูุชุฑุงุถูุฉ).

**ุงูุญู:**
1. ุฃุถู ุฌููุน ุงููุชุบูุฑุงุช ุงููุฐููุฑุฉ ุฃุนูุงู ูู Coolify
2. ุงุณุชุฎุฏู ุงููุชุบูุฑุงุช ุงููููุตูุฉ (DB_HOST, DB_PORT, ุฅูุฎ)
3. ุฃุนุฏ ุงููุดุฑ
4. ุชุญูู ูู ุงูุณุฌูุงุช

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู ุจุนุฏ ุชุทุจูู ูุฐู ุงูุชุบููุฑุงุชุ ุชุญูู ูู:
1. ุณุฌูุงุช ุงูุญุงููุฉ ูู Coolify
2. ุฑุณุงุฆู ุงูุชุตุญูุญ ุงูุชู ุชุจุฏุฃ ุจู `๐ Database Configuration Debug:`
3. ุชุฃูุฏ ูู ุฃู ุฌููุน ุงููุชุบูุฑุงุช ูุถุงูุฉ ุจุดูู ุตุญูุญ

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2 ุฃูุชูุจุฑ 2025