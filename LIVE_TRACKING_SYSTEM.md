# ูุธุงู ุงูุชุชุจุน ุงููุจุงุดุฑ ููุนููุงุก - Live Tracking System

**ุงูุชุงุฑูุฎ:** 2025-10-02  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุชุชุจุน ูุจุงุดุฑ ูุชูุฏู ููุนููุงุก ูููุฑ:
- โ ุชุชุจุน ูุญุธู ููุดุญูุงุช
- โ ุชุญุฏูุซ ุชููุงุฆู ูู 15/30/60 ุซุงููุฉ ุฃู 5 ุฏูุงุฆู
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ุฌูููุฉ ูุฃูููุฉ
- โ ูุนูููุงุช ุญููููุฉ ูู ShipsGo API
- โ ุฎุฑุงุฆุท ุชูุงุนููุฉ
- โ ูุฑุงุญู ุงูุดุญูุฉ ุจุงูุชูุตูู
- โ ูุนูููุงุช ุจูุฆูุฉ (CO2)

---

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ

### 1. **EnhancedTrackingCard.tsx**
**ุงููุณุงุฑ:** `frontend/src/components/Tracking/EnhancedTrackingCard.tsx`

**ุงููุตู:** ูููู React ูุชูุฏู ูุนุฑุถ ุจูุงูุงุช ุงูุชุชุจุน ุจุดูู ุฌููู ูุฃููู

**ุงูููุฒุงุช:**
- โ ุชุตููู ุนุตุฑู ูุน Animations (Framer Motion)
- โ ุนุฑุถ ูุณุงุฑ ุงูุดุญูุฉ ุจุดูู ูุฑุฆู
- โ Timeline ูููุฑุงุญู ูุน ุฃููููุงุช ูุฎุตุตุฉ
- โ ูุนูููุงุช ุงูุณูููุฉ ูุงูุญุงููุฉ
- โ ุงููููุน ุงูุญุงูู GPS
- โ ูุนูููุงุช ุจูุฆูุฉ (ุงูุจุนุงุซุงุช CO2)
- โ ุฑุงุจุท ููุฎุฑูุทุฉ ุงููุจุงุดุฑุฉ
- โ ุนุฏุงุฏ "ุขุฎุฑ ุชุญุฏูุซ"
- โ ุฒุฑ ุชุญุฏูุซ ูุฏูู

**ุงูุงุณุชุฎุฏุงู:**
```tsx
import EnhancedTrackingCard from '@/components/Tracking/EnhancedTrackingCard';

<EnhancedTrackingCard
  trackingData={trackingData}
  autoRefresh={true}
  refreshInterval={30000}
  onRefresh={handleRefresh}
/>
```

---

### 2. **live-tracking.tsx**
**ุงููุณุงุฑ:** `frontend/src/pages/customer/live-tracking.tsx`

**ุงููุตู:** ุตูุญุฉ ุงูุชุชุจุน ุงููุจุงุดุฑ ููุนููุงุก ูู ุจูุงุจุฉ ุงูุนููุงุก

**ุงูููุฒุงุช:**
- โ ูุงุฆูุฉ ุจุฌููุน ุงูุดุญูุงุช ุงููุดุทุฉ
- โ ุงุฎุชูุงุฑ ุงูุดุญูุฉ ูู ูุงุฆูุฉ ููุณุฏูุฉ
- โ ุชุญุฏูุซ ุชููุงุฆู ูุงุจู ููุชูุนูู/ุงูุชุนุทูู
- โ ุงุฎุชูุงุฑ ูุชุฑุฉ ุงูุชุญุฏูุซ (15ุซุ 30ุซุ 1ุฏุ 5ุฏ)
- โ ููุฎุต ุญุงูุฉ ุงูุดุญูุฉ
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ
- โ ุชุตููู Responsive

**ุงููุตูู:**
```
/customer/live-tracking
```

---

### 3. **check-database.js**
**ุงููุณุงุฑ:** `check-database.js`

**ุงููุตู:** ุณูุฑูุจุช Node.js ููุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูููุฒุงุช:**
- โ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช PostgreSQL
- โ ุนุฑุถ ุฌููุน ุงูุฌุฏุงูู
- โ ุงูุชุญูู ูู ุงูุฌุฏุงูู ุงููุชููุนุฉ
- โ ุนุฑุถ ุนุฏุฏ ุงูุตููู ูู ูู ุฌุฏูู
- โ ุนุฑุถ ุงูุฃุนูุฏุฉ ูููุน ุงูุจูุงูุงุช
- โ ูุญุต ุฌุฏูู Migrations
- โ ุฅุญุตุงุฆูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุงุณุชุฎุฏุงู:**
```bash
node check-database.js
```

---

## ๐๏ธ ูุชุงุฆุฌ ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช

### โ ุงูุฌุฏุงูู ุงูููุฌูุฏุฉ (8 ุฌุฏุงูู):

1. **ads** - ุงูุฅุนูุงูุงุช
2. **clients** - ุงูุนููุงุก
3. **customer_accounts** - ุญุณุงุจุงุช ุงูุนููุงุก
4. **migrations** - ุณุฌู ุงูุชุญุฏูุซุงุช
5. **payment_records** - ุณุฌูุงุช ุงููุฏููุนุงุช
6. **settings** - ุงูุฅุนุฏุงุฏุงุช
7. **shipments** - ุงูุดุญูุงุช
8. **users** - ุงููุณุชุฎุฏููู (ุงููุดุฑููู)

### ๐ ุงูุฅุญุตุงุฆูุงุช:
- **ุฅุฌูุงูู ุงูุฌุฏุงูู:** 8
- **ุฅุฌูุงูู ุงูุฅุฏุฎุงูุงุช:** 31
- **ุฅุฌูุงูู ุงูุชุญุฏูุซุงุช:** 58
- **ุฅุฌูุงูู ุงูุญุฐู:** 10

### โ ุฌููุน ุงูุฌุฏุงูู ุงููุทููุจุฉ ููุฌูุฏุฉ!

---

## ๐จ ุชุตููู ุงููุงุฌูุฉ

### ุงูุฃููุงู ุงููุณุชุฎุฏูุฉ:

#### ุญุงูุงุช ุงูุดุญูุฉ:
- **ุชู ุงูุชุณููู:** ุฃุฎุถุฑ (Green 500-600)
- **ูู ุงูุทุฑูู:** ุฃุฒุฑู (Blue 500-600)
- **ูู ุงููููุงุก:** ุจููุณุฌู (Purple 500-600)
- **ูุชุฃุฎุฑ:** ุฃุญูุฑ (Red 500-600)
- **ุงูุชุฑุงุถู:** ุฑูุงุฏู (Gray 500-600)

#### ุงููุฑุงุญู:
- **ููุชููุฉ:** ุฎูููุฉ ุฎุถุฑุงุก ูุงุชุญุฉ + ุญุฏูุฏ ุฎุถุฑุงุก
- **ุฌุงุฑูุฉ:** ุฎูููุฉ ุฒุฑูุงุก ูุงุชุญุฉ + ุญุฏูุฏ ุฒุฑูุงุก
- **ูุงุฏูุฉ:** ุฎูููุฉ ุฑูุงุฏูุฉ ูุงุชุญุฉ + ุญุฏูุฏ ุฑูุงุฏูุฉ

#### ุงูุฃููููุงุช:
- ๐ **Truck** - ุงูุชุญููู
- ๐ข **Ship** - ุงููุบุงุฏุฑุฉ
- ๐งญ **Navigation** - ุงูุนุจูุฑ
- โ **Anchor** - ุงููููุงุก
- ๐ **Home** - ุงููุตูู

---

## ๐ ูุธุงู ุงูุชุญุฏูุซ ุงูุชููุงุฆู

### ุงูุฎูุงุฑุงุช ุงููุชุงุญุฉ:
1. **ูู 15 ุซุงููุฉ** - ูููุชุงุจุนุฉ ุงูุฏูููุฉ ุฌุฏุงู
2. **ูู 30 ุซุงููุฉ** - ุงูุฎูุงุฑ ุงูููุตู ุจู
3. **ูู ุฏูููุฉ** - ูููุชุงุจุนุฉ ุงูุนุงุฏูุฉ
4. **ูู 5 ุฏูุงุฆู** - ูุชูููุฑ ุงูููุงุฑุฏ

### ุขููุฉ ุงูุนูู:
```typescript
useEffect(() => {
  if (autoRefresh && selectedShipment) {
    const interval = setInterval(() => {
      fetchTrackingData(selectedShipment);
    }, refreshInterval * 1000);

    return () => clearInterval(interval);
  }
}, [autoRefresh, refreshInterval, selectedShipment]);
```

---

## ๐ฑ ุงูุชูุงูู ูุน ุงูุฃุฌูุฒุฉ

### โ Desktop
- ุชุตููู ูุงูู ูุน 3 ุฃุนูุฏุฉ
- ุฌููุน ุงูููุฒุงุช ูุชุงุญุฉ
- Animations ุณูุณุฉ

### โ Tablet
- ุชุตููู 2 ุฃุนูุฏุฉ
- ููุงุฆู ูุงุจูุฉ ููุทู
- ุชุฌุฑุจุฉ ูุญุณููุฉ

### โ Mobile
- ุชุตููู ุนููุฏ ูุงุญุฏ
- ููุงุฆู ุนููุฏูุฉ
- ุฃุฒุฑุงุฑ ูุจูุฑุฉ ุณููุฉ ุงูููุณ
- Swipe gestures

---

## ๐ API Endpoints ุงููุณุชุฎุฏูุฉ

### 1. **Get Customer Shipments**
```
GET /api/customer-portal/shipments
Headers: Authorization: Bearer {token}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
[
  {
    "id": "uuid",
    "trackingNumber": "GH123ABC",
    "description": "ุดุญูุฉ ุฃุซุงุซ",
    "status": "in_transit",
    "containerNumber": "ABCD1234567",
    "blNumber": "BL123456",
    "bookingNumber": "BOOK123",
    "enableTracking": true
  }
]
```

### 2. **Get Real-Time Tracking**
```
GET /api/shipments/{id}/tracking
Headers: Authorization: Bearer {token}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "success": true,
  "data": {
    "container_number": "ABCD1234567",
    "shipping_line": "MSC",
    "vessel_name": "MSC OSCAR",
    "port_of_loading": "Shanghai, China",
    "port_of_discharge": "Los Angeles, USA",
    "status": "In Transit",
    "milestones": [...],
    "location": {
      "latitude": 35.1796,
      "longitude": -120.7401,
      "timestamp": "2025-10-02T01:00:00Z"
    },
    "co2_emissions": 1250,
    "live_map_url": "https://..."
  },
  "shipmentInfo": {
    "trackingNumber": "GH123ABC",
    "description": "ุดุญูุฉ ุฃุซุงุซ",
    "client": "ุฃุญูุฏ ูุญูุฏ"
  }
}
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ููุนููุงุก:

1. **ุชุณุฌูู ุงูุฏุฎูู** ุฅูู ุจูุงุจุฉ ุงูุนููุงุก
   ```
   /customer/login
   ```

2. **ุงูุงูุชูุงู** ุฅูู ุตูุญุฉ ุงูุชุชุจุน ุงููุจุงุดุฑ
   ```
   /customer/live-tracking
   ```

3. **ุงุฎุชูุงุฑ ุงูุดุญูุฉ** ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ

4. **ุชูุนูู ุงูุชุญุฏูุซ ุงูุชููุงุฆู** (ุงุฎุชูุงุฑู)

5. **ุงุฎุชูุงุฑ ูุชุฑุฉ ุงูุชุญุฏูุซ** (15ุซุ 30ุซุ 1ุฏุ 5ุฏ)

6. **ูุดุงูุฏุฉ** ุจูุงูุงุช ุงูุชุชุจุน ุงููุจุงุดุฑุฉ

### ูููุทูุฑูู:

#### ุฅุถุงูุฉ ุงููููู ุฅูู ุตูุญุฉ ุฌุฏูุฏุฉ:
```tsx
import EnhancedTrackingCard from '@/components/Tracking/EnhancedTrackingCard';

function MyPage() {
  const [trackingData, setTrackingData] = useState(null);

  const fetchData = async () => {
    const response = await axios.get('/api/shipments/123/tracking');
    setTrackingData(response.data);
  };

  return (
    <EnhancedTrackingCard
      trackingData={trackingData}
      autoRefresh={true}
      refreshInterval={30000}
      onRefresh={fetchData}
    />
  );
}
```

---

## ๐ฏ ุงูููุฒุงุช ุงููุชูุฏูุฉ

### 1. **Animations**
- ุงุณุชุฎุฏุงู Framer Motion ููุญุฑูุงุช ุงูุณูุณุฉ
- Fade In/Out ููุนูุงุตุฑ
- Scale animations ููุจุทุงูุงุช
- Slide animations ููููุงุฆู

### 2. **Real-time Updates**
- ุชุญุฏูุซ ุชููุงุฆู ูุงุจู ููุชุฎุตูุต
- ุนุฏุงุฏ "ุขุฎุฑ ุชุญุฏูุซ"
- ูุคุดุฑ ุงูุชุญููู ุฃุซูุงุก ุงูุชุญุฏูุซ

### 3. **Visual Timeline**
- ุฎุท ุฒููู ูุฑุฆู ูููุฑุงุญู
- ุฃููููุงุช ูุฎุตุตุฉ ููู ูุฑุญูุฉ
- ุฃููุงู ุชุนุจูุฑูุฉ ููุญุงูุงุช

### 4. **Environmental Info**
- ุนุฑุถ ุงูุจุนุงุซุงุช CO2
- ูุนูููุงุช ุจูุฆูุฉ ููุดุญูุฉ

### 5. **Interactive Map**
- ุฑุงุจุท ููุฎุฑูุทุฉ ุงููุจุงุดุฑุฉ
- ุนุฑุถ ุงููููุน ุงูุญุงูู GPS

---

## ๐ง ุงูุชุฎุตูุต

### ุชุบููุฑ ูุชุฑุฉ ุงูุชุญุฏูุซ ุงูุงูุชุฑุงุถูุฉ:
```tsx
const [refreshInterval, setRefreshInterval] = useState(30); // 30 ุซุงููุฉ
```

### ุชุบููุฑ ุงูุฃููุงู:
```tsx
const getStatusColor = (status: string) => {
  // ุฃุถู ุฃููุงูู ุงููุฎุตุตุฉ ููุง
  return 'from-custom-500 to-custom-600';
};
```

### ุฅุถุงูุฉ ูุฑุงุญู ุฌุฏูุฏุฉ:
```tsx
const getMilestoneIcon = (event: string, status: string) => {
  // ุฃุถู ุฃููููุงุช ูุฎุตุตุฉ ูููุฑุงุญู
  if (eventLower.includes('custom')) {
    return <CustomIcon className={iconClass} />;
  }
};
```

---

## ๐ ุงูุฃุฏุงุก

### ุชุญุณููุงุช ุงูุฃุฏุงุก:
- โ ุงุณุชุฎุฏุงู `useCallback` ูุชุฌูุจ ุฅุนุงุฏุฉ ุงูุฑุณู ุบูุฑ ุงูุถุฑูุฑูุฉ
- โ ุงุณุชุฎุฏุงู `useMemo` ููุจูุงูุงุช ุงููุญุณูุจุฉ
- โ Lazy loading ููููููุงุช ุงูุซูููุฉ
- โ Debouncing ููุชุญุฏูุซุงุช ุงููุชูุฑุฑุฉ

### ุงุณุชููุงู ุงูููุงุฑุฏ:
- **ุงูุชุญุฏูุซ ูู 15 ุซุงููุฉ:** ~240 ุทูุจ/ุณุงุนุฉ
- **ุงูุชุญุฏูุซ ูู 30 ุซุงููุฉ:** ~120 ุทูุจ/ุณุงุนุฉ (ููุตู ุจู)
- **ุงูุชุญุฏูุซ ูู ุฏูููุฉ:** ~60 ุทูุจ/ุณุงุนุฉ
- **ุงูุชุญุฏูุซ ูู 5 ุฏูุงุฆู:** ~12 ุทูุจ/ุณุงุนุฉ

---

## ๐ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:

1. **401 Unauthorized**
   - ุงูุญู: ุฅุนุงุฏุฉ ุชูุฌูู ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

2. **404 Not Found**
   - ุงูุญู: ุนุฑุถ ุฑุณุงูุฉ "ุงูุดุญูุฉ ุบูุฑ ููุฌูุฏุฉ"

3. **429 Too Many Requests**
   - ุงูุญู: ุฒูุงุฏุฉ ูุชุฑุฉ ุงูุชุญุฏูุซ ุชููุงุฆูุงู

4. **500 Server Error**
   - ุงูุญู: ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ + ุฒุฑ ุฅุนุงุฏุฉ ุงููุญุงููุฉ

5. **Network Error**
   - ุงูุญู: ุนุฑุถ ุฑุณุงูุฉ "ูุดููุฉ ูู ุงูุงุชุตุงู"

---

## ๐ ุงูุฃูุงู

### ุงูุญูุงูุฉ ุงููุทุจูุฉ:
- โ JWT Authentication
- โ ุงูุชุญูู ูู ุตูุงุญูุงุช ุงูุนููู
- โ Rate Limiting ุนูู API
- โ CORS Configuration
- โ Input Validation

---

## ๐ ุงูููุงุญุธุงุช ุงููููุฉ

1. **ุงูุชุญุฏูุซ ุงูุชููุงุฆู:**
   - ูุชููู ุชููุงุฆูุงู ุนูุฏ ูุบุงุฏุฑุฉ ุงูุตูุญุฉ
   - ูููู ุชุนุทููู ูุฏููุงู
   - ูุญุชุฑู Rate Limits

2. **ุงูุดุญูุงุช ุงููุคููุฉ ููุชุชุจุน:**
   - ูุฌุจ ุฃู ูููู `enableTracking = true`
   - ูุฌุจ ูุฌูุฏ Container/BL/Booking Number
   - ูุง ุชุดูู ุงูุดุญูุงุช ุงูููุบุงุฉ ุฃู ุงููุณููุฉ

3. **ุงูุจูุงูุงุช ุงููุนุฑูุถุฉ:**
   - ูู ShipsGo API ุฅุฐุง ูุชููุฑ
   - Fallback ูุจูุงูุงุช ุงููุธุงู ุงูุฏุงุฎูู
   - ุชุญุฏูุซ ูุญุธู

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- โ ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช - ุฌููุน ุงูุฌุฏุงูู ููุฌูุฏุฉ
- โ ูููู EnhancedTrackingCard ุฌุงูุฒ
- โ ุตูุญุฉ live-tracking ุฌุงูุฒุฉ
- โ ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูุนูู
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุดุงููุฉ
- โ ุงูุชุตููู Responsive
- โ Animations ุณูุณุฉ
- โ ุงูุฃุฏุงุก ูุญุณูู

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ูููุดุฑ:
1. ุงุฎุชุจุงุฑ ุงูุตูุญุฉ ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ
2. ุงุฎุชุจุงุฑ ุงูุชุญุฏูุซ ุงูุชููุงุฆู
3. ุงุฎุชุจุงุฑ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
4. Build ููุฅูุชุงุฌ
5. ุงููุดุฑ

### ููุชุทููุฑ ุงููุณุชูุจูู:
- [ ] ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช Push
- [ ] ุฅุถุงูุฉ ุชุตุฏูุฑ PDF ููุชูุฑูุฑ
- [ ] ุฅุถุงูุฉ ููุงุฑูุฉ ุจูู ุดุญูุงุช ูุชุนุฏุฏุฉ
- [ ] ุฅุถุงูุฉ ุชูุจููุงุช ูุฎุตุตุฉ
- [ ] ุฅุถุงูุฉ ุชูุงูู ูุน Google Maps

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุช:
- ุฑุงุฌุน ุงูุชูุซูู ุงููุงูู
- ุชุญูู ูู logs ุงูุฎุงุฏู
- ุชุญูู ูู console ุงููุชุตูุญ
- ุชุญูู ูู ุงุชุตุงู ุงูุดุจูุฉ

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐**
